{% extends "achievementSearch.html" %} 

{% block body %} 
<h1>Achievement # {{achieveID}} : {{info['title']}}</h1>
<!-- Display the description-->
<p>{{info['description']}}</p>
<!-- Allow the user to check this as completed-->
{%  if info['isSelfReport'] == 1 and thisUser != None: %}
    <!-- <p>{{user}}</p> -->
    <p>Did you complete this achievement?</p>>
    <button data-tt="{{achieveID}}" class="report-button">Yes!</button>
    <p>{{logged_in}}</p>
{% endif %}
<!-- implement an undo function if they accidentally mark as completed-->

<!-- Display all the people who have completed this achievement-->
{% if users |length != 0: %}

<h2 id = "users_list">Users who have reached this achievement!</h2> 

<table id= "achievers"> 
    <tr>
        <th>First Name</th>
        <th>Last Name</th>
        <th>Username</th>
        <th> number of times achieved </th>
    </tr>

    {% for user in users %}
    <tr data-id = "{{user['AID']}}"> 
        <td><span class="first">{{user['first_Name']}}</span></td>
        <td class="last">{{user['last_Name']}}</td>
        <td class="username"><a href="{{url_for('profile', username=user['username'])}}">{{user['username']}}</a></td>
        <td class="count">{{user['count']}}</td>
    </tr>
    {% endfor %}

</table>

{% else %}

<h2 id = "no_users_yet">Be the first to reach this achievement!</h2>

{% endif %}


{% endblock %}

{% block JSJQ %}
<script>
var URL = "{{url_for('updateCompleted')}}";
</script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="{{url_for('static',filename='achievements.js')}}"></script>
{% endblock %}