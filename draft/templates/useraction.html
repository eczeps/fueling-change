{% extends "profile.html" %} 
<!-- Two different load cases: -->
<!-- (1) User pressed report button on profile page -->
<!-- (2) User pressed find change button on profile page -->

{% block navigation %}
    <nav>
    <div id="navigation">
        <ul>
        <li><a href="/">Home</a></li>
        <li><a href="/achievements/">Search Achievements</a></li>
        <li><a href="/users/">Search Users</a></li>
            {% if thisUser %} <!-- hidden until login -->
                <li><a class="halfactive" href="/profile/{{userURL}}/">My Profile</a></li>
                <li><a href="/login/">Log Out</a></li>
            {% elif isLoggedIn != None %}
                <li><a class="quarteractive" href="/profile/{{userURL}}/">My Profile</a></li>
                <li><a href="/login/">Log Out</a></li>
            {% else %} <!-- hidden when logged in -->
                <li><a class="quarteractive" href="/profile/{{userURL}}/">My Profile</a></li>
                <li><a href="/login/">Login</a></li>
            {% endif %}
        </ul>
    </div>
    </nav>
{% endblock %}

{% block body %}
    {% if request.form['submit'] == 'report' %}
    <!-- (1) THIS IS WHERE THE USER CAN INSERT SELF-REPORTED INFORMATION -->
    <!-- fields should be autofilled -->

    <h1>Update Carbon Information</h1>
    <!-- How they add more data or insert data for the first time -->
    <div class="centerme">
    <form class="bigform" id="update" method=POST action="/useraction/report/{{userURL}}/">
        <table>
        <tr><td class="forform"><label>Miles Flown Annually: <input type="number" id="flights" name="flights" value={{flights}}></label></td></tr>
        <tr><td class="forform"><label>Miles Driven Monthly: <input type="number" id="drives" name="drives" value={{drives}}></label></td></tr>
        
        <tr><td class="forform"><fieldset>
            <legend>Car Type</legend>
            <label class="space">
                <input required type="radio" name="cartype" value="gas">
                GAS
            </label>
            <label class="space">
                <input required type="radio" name="cartype" value="hybrid">
                HYBRID
            </label>
            <label>
                <input required type="radio" name="cartype" value="electric">
                ELECTRIC
            </label>
            </fieldset>
        </td></tr>

        <tr><td class="forform"><label>Weekly Lamb Servings: <input type="number" id="lamb" name="lamb" value={{lamb}} min="0"></label></td></tr>
        <tr><td class="forform"><label>Weekly Beef Servings: <input type="number" id="beef" name="beef" value={{beef}} min="0"></label></td></tr>
        <tr><td class="forform"><label>Weekly Cheese Servings: <input type="number" id="cheese" name="cheese" value={{cheese}} min="0"></label></td></tr>
        <tr><td class="forform"><label>Weekly Pork Servings: <input type="number" id="pork" name="pork" value={{pork}} min="0"></label></td></tr>
        <tr><td class="forform"><label>Weekly Turkey Servings: <input type="number" id="turkey" name="turkey" value={{turkey}} min="0"></label></td></tr>
        <tr><td class="forform"><label>Weekly Chicken Servings: <input type="number" id="chicken" name="chicken" value={{chicken}} min="0"></label></td></tr>
        <tr><td class="forform"><label>Weekly Loads of Laundry: <input type="number" id="laundry" name="laundry" value={{laundry}} min="0"></label></td></tr>

        <tr><td class="forform"><fieldset>
            <legend>Typical Drying Style</legend>
                <label class="space">
                    <input required type="radio" name="drytype" value="dryer">
                    DRYER
                </label>
                <label class="space">
                    <input required type="radio" name="drytype" value="air dry">
                    AIR DRY
                </label>
                </fieldset>
            </td></tr>

        <tr><td class="forform">
            <button id="updatebtn" type="submit" name="submit" value="updateInfo">Submit!</button>
        </td></tr>

        </table>
    </form>
    </div> <!-- end of centerme div -->
    
    <!-- ------------------------------------------- -->
    {% elif request.form['submit'] == 'upload' %}
    <!-- (2) THIS IS WHERE THE USER CAN UPLOAD A PROFILE IMAGE -->
    <h1>Change Profile Photo</h1>
    <!-- How they add more data or insert data for the first time -->
    <div class="centerme">
        <form class="regular" action="{{url_for('upload_file', username=userURL)}}" method="post" enctype="multipart/form-data">
            <div id="wrapper2">
                <label><div id="left2" class="signup">Select Image File to Upload</div>
                    <div id="right"><input type="file" name="file"></div></label>
            </div>
            <button id="updatebtn" type="submit" name="submit" value="updateInfo">Submit!</button></td></tr>
        </table>
            </form>
    </div> <!-- end of centerme div -->

    <!-- ------------------------------------------- -->
    {% elif request.form['submit'] == 'delete' %}
    <div class="centerme">
        <h1>Really Delete Profile?</h1>
        <form action="{{url_for('deleteUser', user=userURL)}}" method="post">
        <table>
            <tr><td class="signup"><button id="updatebtn" type="submit" name="submit" value="yes">Yes!</button></td>
                <td><button id="updatebtn" type="submit" name="submit" value="no">No!</button></td></tr>
        </table>
        </form>
    </div> <!-- end of centerme div -->

    
    {% endif %}

{% endblock %}